# =============================================================================
# DEFAULT SERVER BLOCK - Production IP Blocking
# =============================================================================
# This server block catches requests to the direct IP address and closes
# the connection without response. This prevents automated bot attacks that
# scan IP ranges. Only requests with the correct Host header (domain name)
# will reach the main application server.
# =============================================================================

server {
    listen 80 default_server;
    listen [::]:80 default_server;

    listen 443 default_server;
    listen [::]:443 default_server;

    # There's no certificate there, but you will get an error without these 2 lines present!
    ssl_certificate /etc/nginx/ssl/selfsigned.crt;
    ssl_certificate_key /etc/nginx/ssl/selfsigned.key;

    # Close connection without response (more secure than 403/404)
    return 444;
}
